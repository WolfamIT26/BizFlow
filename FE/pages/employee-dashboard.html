<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizFlow POS - Bán hàng</title>
    <link rel="stylesheet" href="../assets/css/employee-dashboard.css">
</head>
<body class="pos-body">
    <header class="pos-header">
        <div class="header-left">
            <div class="logo-mark" aria-label="BizFlow">
                BIZFLOW
            </div>
            <div class="order-tabs">
                <button class="order-tab active">Hóa đơn 1 <span class="tab-close">×</span></button>
                <button class="order-tab ghost" title="Thêm hóa đơn">+</button>
                <button class="order-tab ghost">HĐ lưu tạm</button>
            </div>
        </div>
        <div class="header-actions">
            <div class="store">TRƯỜNG CHINH</div>
            <button class="icon-btn" title="Thông báo" aria-label="Thông báo">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <path d="M12 3a6 6 0 0 0-6 6v3.5L4 15v1h16v-1l-2-2.5V9a6 6 0 0 0-6-6Z" />
                    <path d="M9.5 18a2.5 2.5 0 0 0 5 0" />
                </svg>
            </button>
            <button class="icon-btn" title="Đồng bộ" aria-label="Đồng bộ">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <path d="M4 12a8 8 0 0 1 13.66-5.66" />
                    <path d="M18 4v4h-4" />
                    <path d="M20 12a8 8 0 0 1-13.66 5.66" />
                    <path d="M6 20v-4h4" />
                </svg>
            </button>
            <div class="user-chip" id="userBtn">
                <span id="userInitial">E</span>
                <span id="userNameDropdown">Nhân viên</span>
            </div>
            <button id="logoutBtn" class="icon-btn" title="Đăng xuất" aria-label="Đăng xuất">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <path d="M10 6H5v12h5" />
                    <path d="M14 16l4-4-4-4" />
                    <path d="M18 12H9" />
                </svg>
            </button>
            <button class="icon-btn" title="Ứng dụng" aria-label="Ứng dụng">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <circle cx="6" cy="6" r="1.5" />
                    <circle cx="12" cy="6" r="1.5" />
                    <circle cx="18" cy="6" r="1.5" />
                    <circle cx="6" cy="12" r="1.5" />
                    <circle cx="12" cy="12" r="1.5" />
                    <circle cx="18" cy="12" r="1.5" />
                </svg>
            </button>
        </div>
    </header>

    <section class="pos-toolbar">
        <div class="toolbar-search">
            <button class="dropdown-btn">Tìm kiếm</button>
            <input id="searchInput" type="text" placeholder="(F3) Nhập tên hàng hóa, mã vạch, mã SKU">
        </div>
        <div class="toolbar-qty">
            <span class="barcode" aria-hidden="true">|||</span>
            <label for="qtyInput">SL</label>
            <input id="qtyInput" type="number" min="1" value="1">
        </div>
        <div class="toolbar-toggle">
            <label class="switch">
                <input type="checkbox" id="splitLine">
                <span class="slider"></span>
            </label>
            <span>Tách dòng</span>
        </div>
        <button class="toolbar-chip" id="employeeSelector">
            <span class="chip-icon">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <circle cx="12" cy="8" r="3" />
                    <path d="M5 20a7 7 0 0 1 14 0" />
                </svg>
            </span>
            <span id="selectedEmployeeName">Phạm Huy Đức V</span>
            <span class="chip-caret">▾</span>
        </button>
        <div class="employee-dropdown" id="employeeList" style="display: none;">
            <div class="employee-empty">Đang tải...</div>
        </div>
        <button class="toolbar-chip">
            <span class="chip-icon">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <path d="M4 12l8-8 8 8-8 8-8-8Z" />
                    <path d="M9 12h6" />
                </svg>
            </span>
            <span>(Alt + B) Chọn bảng giá</span>
            <span class="chip-caret">▾</span>
        </button>
        <button class="toolbar-chip toolbar-store">
            <span class="chip-icon">
                <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                    <path d="M4 10h16l-2-5H6l-2 5Z" />
                    <path d="M6 10v9h12v-9" />
                </svg>
            </span>
            <span>Tại cửa hàng</span>
            <span class="chip-caret">▾</span>
        </button>
    </section>

    <section class="pos-layout">
        <div class="product-panel">
            <div class="empty-state cart-area" id="cartArea">
                <div class="cart-table">
                    <div class="cart-row header" id="cartHeaderRow">
                        <span>#</span>
                        <span>Mã SP</span>
                        <span>Tên sản phẩm</span>
                        <span>SL</span>
                        <span>ĐVT</span>
                        <span>Đơn giá</span>
                        <span>Thành tiền</span>
                        <span></span>
                    </div>
                    <div class="cart-items" id="cartItems"></div>
                </div>
                <div class="empty-state-content" id="emptyState">
                    <div class="empty-icons">
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M6 8h12l-1.2 11H7.2L6 8Zm2-3h8l1 3H7l1-3Z" />
                            </svg>
                        </div>
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M7 4h10l2 5-3 11H8L5 9l2-5Z" />
                            </svg>
                        </div>
                        <div class="empty-icon">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M4 16c2-6 7-8 12-8h4v3h-4c-4 0-7 1-9 5H4Z" />
                            </svg>
                        </div>
                    </div>
                    <p class="empty-text">Chưa có hàng hóa nào, ấn F3 để tìm kiếm hàng hóa</p>
                    <div class="empty-actions">
                        <button class="ghost-btn">Chọn hàng hóa</button>
                        <button class="ghost-btn">Nhập khẩu hàng hóa</button>
                    </div>
                </div>
            </div>

            <div class="suggestion-panel" id="suggestionPanel">
                <div class="suggestion-header" id="suggestionHeader">
                    <h3 id="suggestionTitle">TƯ VẤN BÁN HÀNG</h3>
                    <div class="suggestion-controls" id="suggestionControls">
                        <div class="suggestion-search">
                            <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                                <circle cx="11" cy="11" r="7" />
                                <path d="M16.5 16.5L21 21" />
                            </svg>
                            <input id="suggestionSearchInput" type="text" placeholder="(Shift + F3) Tìm kiếm">
                        </div>
                        <div class="suggestion-filter">
                            <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                                <path d="M4 6h16" />
                                <path d="M8 12h8" />
                                <path d="M10 18h4" />
                            </svg>
                            <select id="sortSelect">
                                <option value="name">Lọc theo nhóm hàng hóa</option>
                                <option value="price-low">Giá thấp đến cao</option>
                                <option value="price-high">Giá cao đến thấp</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="products-grid" id="productsGrid"></div>
            </div>
        </div>

        <aside class="side-panel">
            <div class="customer-panel">
                <div class="customer-header">
                    <div class="customer-title">
                        <span class="store-pill">Tại cửa hàng</span>
                    </div>
                    <div class="customer-actions">
                        <button class="icon-btn small" title="Giao hàng" aria-label="Giao hàng">
                            <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                                <path d="M3 16h11v-7H7l-4 4v3Z" />
                                <path d="M14 10h3l4 4v2h-7Z" />
                                <circle cx="7" cy="18" r="2" />
                                <circle cx="17" cy="18" r="2" />
                            </svg>
                        </button>
                        <button class="icon-btn small" title="Quà tặng" aria-label="Quà tặng">
                            <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                                <path d="M4 10h16v10H4z" />
                                <path d="M2 8h20v2H2z" />
                                <path d="M12 8v12" />
                                <path d="M8 8c-1.5 0-2.5-1-2.5-2s1-2 2.5-1 2 3 2 3-0.5 0-2 0Z" />
                                <path d="M16 8c1.5 0 2.5-1 2.5-2s-1-2-2.5-1-2 3-2 3 0.5 0 2 0Z" />
                            </svg>
                        </button>
                        <button class="icon-btn small" title="Khác" aria-label="Khác">▾</button>
                    </div>
                </div>
                <div class="customer-search-box">
                    <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                        <circle cx="11" cy="11" r="7" />
                        <path d="M16.5 16.5L21 21" />
                    </svg>
                    <input id="customerSearch" type="text" placeholder="(F4) SĐT, tên khách hàng">
                    <button id="scanCustomerBtn" class="icon-btn mini" type="button" title="Quét mã">
                        <svg viewBox="0 0 24 24" class="icon-svg" aria-hidden="true">
                            <path d="M4 7V4h3" />
                            <path d="M20 7V4h-3" />
                            <path d="M4 17v3h3" />
                            <path d="M20 17v3h-3" />
                            <path d="M7 12h10" />
                        </svg>
                    </button>
                    <button id="clearCustomerBtn" class="icon-btn mini" type="button" title="Bỏ khách">×</button>
                    <button id="addCustomerBtn" class="icon-btn mini" type="button" title="Thêm khách hàng">+</button>
                </div>
                <div class="customer-dropdown" id="customerList">
                    <div class="customer-empty"></div>
                </div>
            </div>
            <div class="payment-panel">
                <div class="invoice-toggle">
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                    <span>In hóa đơn</span>
                    <label class="checkbox">
                        <input type="checkbox">
                        <span>Đặt hàng</span>
                    </label>
                </div>

                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Tạm tính</span>
                        <span id="subtotal">0đ</span>
                    </div>
                    <div class="summary-row total">
                        <span>Tổng cộng</span>
                        <span id="totalAmount">0đ</span>
                    </div>
                </div>

                <div class="payment-breakdown">
                    <div class="summary-row">
                        <span>Khuyến mại</span>
                        <span id="promoAmount">0đ</span>
                    </div>
                    <div class="summary-row">
                        <span>Thuế GTGT</span>
                        <span id="taxAmount">0đ</span>
                    </div>
                    <div class="summary-row">
                        <span>Đặt cọc</span>
                        <span id="depositAmount">0đ</span>
                    </div>
                    <div class="summary-row">
                        <span>Phí đổi trả</span>
                        <span id="returnFeeAmount">0đ</span>
                    </div>
                    <div class="summary-row total">
                        <span>Còn phải thu</span>
                        <span id="amountDue">0đ</span>
                    </div>
                </div>

                <div class="payment-methods">
                    <p class="section-title">Phương thức thanh toán</p>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="CASH" checked>
                            <span>Tiền mặt</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="TRANSFER">
                            <span>Chuyển khoản</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="CARD">
                            <span>Thanh toán thẻ</span>
                        </label>
                    </div>
                </div>

                <div class="cash-panel" id="cashPanel">
                    <div class="summary-row">
                        <span>Tiền khách đưa</span>
                        <input id="cashReceivedInput" type="number" min="0" placeholder="0">
                    </div>
                    <div class="summary-row total">
                        <span>Trả lại</span>
                        <span id="changeAmount">0đ</span>
                    </div>
                </div>

                <div class="payment-note">
                    <label for="paymentNote">Ghi chú thanh toán</label>
                    <textarea id="paymentNote" rows="3" placeholder="Nhập ghi chú..."></textarea>
                </div>

                <div class="quick-cash">
                    <button class="chip" data-cash="500000">500.000</button>
                    <button class="chip" data-cash="200000">200.000</button>
                    <button class="chip" data-cash="100000">100.000</button>
                </div>

                <div class="cart-actions">
                    <button id="saveBillBtn" class="ghost-btn">Lưu tạm (F10)</button>
                    <button id="checkoutBtn" class="primary-btn">Thu tiền (F9)</button>
                </div>
            </div>
        </aside>
    </section>

    <div class="modal" id="customerModal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm khách hàng</h3>
                <button id="closeCustomerModal" class="icon-btn small" type="button" aria-label="Đóng">×</button>
            </div>
            <form id="customerForm">
                <div class="modal-section">
                    <div class="section-title">Thông tin cơ bản</div>
                    <div class="form-grid two-cols">
                        <label class="form-field">
                            <span>Mã khách hàng</span>
                            <input type="text" placeholder="Tự động">
                        </label>
                        <label class="form-field">
                            <span>Khách hàng *</span>
                            <input id="customerNameInput" type="text" placeholder="Tên khách hàng" required>
                        </label>
                        <label class="form-field">
                            <span>Số điện thoại *</span>
                            <input id="customerPhoneInput" type="tel" placeholder="Số điện thoại">
                        </label>
                        <label class="form-field">
                            <span>Email</span>
                            <input id="customerEmailInput" type="email" placeholder="Email">
                        </label>
                        <label class="form-field">
                            <span>CCCD</span>
                            <input type="text" placeholder="Số căn cước công dân">
                        </label>
                        <label class="form-field">
                            <span>Ngày sinh</span>
                            <input type="date">
                        </label>
                        <div class="form-field inline-group">
                            <span>Giới tính</span>
                            <div class="radio-group">
                                <label><input type="radio" name="gender"> Nam</label>
                                <label><input type="radio" name="gender"> Nữ</label>
                                <label><input type="radio" name="gender" checked> Không xác định</label>
                            </div>
                        </div>
                        <div class="form-field address-group">
                            <span>Địa chỉ</span>
                            <div class="address-grid">
                                <input type="text" list="citySuggestions" placeholder="Tỉnh/Thành phố">
                                <datalist id="citySuggestions">
                                    <option value="Hà Nội"></option>
                                    <option value="Hồ Chí Minh"></option>
                                    <option value="Đà Nẵng"></option>
                                    <option value="Cần Thơ"></option>
                                    <option value="Hải Phòng"></option>
                                    <option value="Bình Dương"></option>
                                    <option value="Đồng Nai"></option>
                                    <option value="Khánh Hòa"></option>
                                    <option value="Nghệ An"></option>
                                    <option value="Thanh Hóa"></option>
                                </datalist>
                                <input type="text" list="districtSuggestions" placeholder="Quận/Huyện">
                                <datalist id="districtSuggestions">
                                    <option value="Quận 1"></option>
                                    <option value="Quận 3"></option>
                                    <option value="Quận 7"></option>
                                    <option value="Quận 10"></option>
                                    <option value="Bình Thạnh"></option>
                                    <option value="Gò Vấp"></option>
                                    <option value="Thủ Đức"></option>
                                    <option value="Tân Bình"></option>
                                    <option value="Phú Nhuận"></option>
                                </datalist>
                                <input type="text" list="wardSuggestions" placeholder="Xã/Phường">
                                <datalist id="wardSuggestions">
                                    <option value="Phường 1"></option>
                                    <option value="Phường 5"></option>
                                    <option value="Phường 7"></option>
                                    <option value="Phường 10"></option>
                                    <option value="Phường 12"></option>
                                    <option value="Phường 14"></option>
                                    <option value="Phường 15"></option>
                                    <option value="Phường 17"></option>
                                    <option value="Phường 25"></option>
                                    <option value="Phường Linh Trung"></option>
                                </datalist>
                                <input id="customerAddressInput" type="text" placeholder="Số nhà, tên đường">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-section">
                    <div class="section-title">Thông tin thẻ thành viên</div>
                    <div class="form-grid two-cols">
                        <label class="form-field">
                            <span>Mã thẻ thành viên</span>
                            <input type="text" placeholder="Mã thẻ">
                        </label>
                        <label class="form-field">
                            <span>Hạng thẻ</span>
                            <select id="customerTierSelect">
                                <option value="">Chọn hạng</option>
                                <option value="member">Member (>= 1.000 điểm)</option>
                                <option value="silver">Silver (>= 3.000 điểm)</option>
                                <option value="gold">Gold (>= 9.000 điểm)</option>
                                <option value="platinum">Platinum (>= 15.000 điểm)</option>
                                <option value="diamond">Diamond (>= 25.000 điểm)</option>
                            </select>
                        </label>
                        <label class="form-field">
                            <span>Điểm thành viên</span>
                            <input id="customerPointsInput" type="number" min="0" placeholder="0">
                        </label>
                        <label class="form-field">
                            <span>Nhóm khách hàng</span>
                            <select>
                                <option value="">Chọn nhóm</option>
                                <option>Khách lẻ</option>
                                <option>Khách VIP</option>
                                <option>Đại lý</option>
                            </select>
                        </label>
                        <label class="form-field">
                            <span>Nhân viên phụ trách</span>
                            <input type="text" placeholder="Nhân viên phụ trách">
                        </label>
                        <label class="form-field full">
                            <span>Ghi chú</span>
                            <input type="text" placeholder="Ghi chú thêm">
                        </label>
                    </div>
                </div>

                <div class="modal-section">
                    <div class="section-title">Thông tin công ty</div>
                    <div class="form-grid two-cols">
                        <label class="form-field">
                            <span>Công ty</span>
                            <input type="text" placeholder="Tên công ty">
                        </label>
                        <label class="form-field">
                            <span>Mã số thuế</span>
                            <input type="text" placeholder="Mã số thuế">
                        </label>
                    </div>
                </div>

                <div class="modal-actions">
                    <label class="confirm-check">
                        <input id="customerConfirmInput" type="checkbox">
                        <span>Xác nhận thông tin khách hàng</span>
                    </label>
                    <button type="button" class="ghost-btn" id="cancelCustomerModal">Hủy bỏ</button>
                    <button type="submit" class="primary-btn">Đồng ý</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal" id="productDetailModal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chi tiết sản phẩm</h3>
                <button class="icon-btn small" type="button" aria-label="Đóng" onclick="closeProductDetail()">×</button>
            </div>
            <div class="detail-layout">
                <div class="detail-image">
                    <div class="detail-image-placeholder">Ảnh sản phẩm</div>
                </div>
                <div class="detail-grid">
                    <div class="detail-row">
                        <span class="detail-label">Tên sản phẩm</span>
                        <span id="detailProductName" class="detail-value">-</span>
                    </div>
                    <div class="detail-row">
                    <span class="detail-label">Mã/SKU</span>
                    <span id="detailProductSku" class="detail-value">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Barcode</span>
                    <span id="detailProductBarcode" class="detail-value">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Đơn vị</span>
                    <span id="detailProductUnit" class="detail-value">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Giá bán</span>
                    <span id="detailProductPrice" class="detail-value">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Tồn kho</span>
                    <span id="detailProductStock" class="detail-value">-</span>
                </div>
                <div class="detail-row full">
                    <span class="detail-label">Mô tả</span>
                    <span id="detailProductDescription" class="detail-value">-</span>
                </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="ghost-btn" onclick="closeProductDetail()">Đóng</button>
                <button type="button" class="primary-btn" id="detailAddToCart">Thêm vào giỏ</button>
            </div>
        </div>
    </div>

    <div class="modal" id="customerDetailModal" aria-hidden="true">
        <div class="modal-content customer-detail">
            <div class="modal-header">
                <h3>Khách hàng: <span id="detailCustomerName">-</span></h3>
                <button class="icon-btn small" type="button" aria-label="Đóng" onclick="closeCustomerDetail()">×</button>
            </div>
            <div class="detail-tabs">
                <button class="tab active">Tổng quan</button>
                <button class="tab">Thông tin</button>
                <button class="tab">Lịch sử mua hàng</button>
                <button class="tab">Công nợ</button>
            </div>
            <div class="customer-detail-body">
                <div class="customer-card">
                    <div class="customer-card-header">
                        <div>
                            <div class="customer-name" id="detailCustomerNameCard">-</div>
                            <div class="customer-tier">Hạng thẻ: MEMBER</div>
                        </div>
                        <button class="ghost-btn small">Đổi thẻ</button>
                    </div>
                    <div class="customer-metrics">
                        <div><span>Mã thẻ thành viên</span><strong>--</strong></div>
                        <div><span>Chính sách tích điểm</span><strong>20.000 = 1 điểm</strong></div>
                        <div><span>Chính sách đổi điểm</span><strong>1 điểm = 1.000</strong></div>
                        <div><span>Điểm tích lũy</span><strong>0</strong></div>
                        <div><span>Sử dụng điểm</span><strong>0</strong></div>
                    </div>
                </div>
                <div class="customer-summary">
                    <div class="summary-box">
                        <h4>Mua hàng</h4>
                        <div class="summary-row">
                            <span>Tổng chi tiêu</span>
                            <strong>0</strong>
                        </div>
                        <div class="summary-row">
                            <span>Số lượng hóa đơn</span>
                            <strong>0</strong>
                        </div>
                    </div>
                    <div class="summary-box">
                        <h4>Công nợ</h4>
                        <div class="summary-row">
                            <span>Tổng dư nợ khách hàng</span>
                            <strong>0</strong>
                        </div>
                        <div class="summary-row">
                            <span>Số lượng chứng từ</span>
                            <strong>0</strong>
                        </div>
                    </div>
                </div>
                <div class="customer-info-list">
                    <div class="info-row">
                        <span>Số điện thoại</span>
                        <strong id="detailCustomerPhone">-</strong>
                    </div>
                    <div class="info-row">
                        <span>Email</span>
                        <strong id="detailCustomerEmail">-</strong>
                    </div>
                    <div class="info-row">
                        <span>Địa chỉ</span>
                        <strong id="detailCustomerAddress">-</strong>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="ghost-btn" onclick="closeCustomerDetail()">Đóng</button>
                <button type="button" class="primary-btn">Xác nhận</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/employee-dashboard.js"></script>
</body>
</html>
